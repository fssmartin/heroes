{"ast":null,"code":"import { of } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./message.service\";\nimport * as i2 from \"@angular/common/http\";\nclass HeroService {\n  constructor(messageService, http) {\n    this.messageService = messageService;\n    this.http = http;\n    this.heroes = [];\n    this.heroess = [];\n    this.heroee = {\n      id: 0,\n      name: '',\n      username: '',\n      email: '',\n      address: {\n        street: '',\n        suite: '',\n        city: '',\n        zipcode: '',\n        geo: {\n          lat: '',\n          lng: ''\n        }\n      },\n      phone: '',\n      website: '',\n      company: {\n        name: '',\n        catchPhrase: '',\n        bs: ''\n      }\n    };\n    this.heroesUrl = 'https://jsonplaceholder.typicode.com/users';\n    //this.heroes = HEROES; \n  }\n\n  getHero(id) {\n    //return of(this.heroess.find(item=>item.id == id));\n    return this.http.get(this.heroesUrl + \"/\" + id).pipe(tap(_ => this.messageService.addMessage(' get Heore ' + id)), catchError(this.handleError('getHeroes', heroee)));\n  }\n  getHeroes(mesage) {\n    //    this.messageService.addMessage(mesage + \": fetched heroes\");\n    return this.http.get(this.heroesUrl).pipe(tap(_ => this.messageService.addMessage(mesage + ' get http')), catchError(this.handleError('getHeroes', [])));\n    //return of(this.heroes);\n  }\n\n  getIdLastHero() {\n    return of(this.heroess[this.heroess.length - 1].id + 1);\n  }\n  deleteHero(id) {\n    this.messageService.addMessage(\"-- Delete Hero id:\" + id + \" Ok\");\n    return of(this.heroess = this.heroess.filter(heroe => heroe.id != id));\n  }\n  addHeroe(hero) {\n    this.messageService.addMessage(\"-- Add Hero id:\" + hero.id + \" Ok\");\n    return of(this.heroess.push(hero));\n  }\n  updateHeroe(hero) {\n    return of(this.heroes.map(myhero => {\n      if (myhero.id === hero.id) {\n        this.messageService.addMessage(\"-- Update Hero id:\" + myhero.id + \" Ok\");\n        myhero.name = hero.name;\n      }\n      ;\n    }));\n  }\n  handleError(operation = 'operation', result) {\n    return error => {\n      // TODO: send the error to remote logging infrastructure\n      //console.error(error); // log to console instead\n      // TODO: better job of transforming error for user consumption\n      //this.log(`${operation} failed: ${error.message}`);\n      this.messageService.addMessage(`-- ${operation} -- failed: \\n\\n ${error.message}`);\n      // Let the app keep running by returning an empty result.\n      return of(result);\n    };\n  }\n}\nHeroService.ɵfac = function HeroService_Factory(t) {\n  return new (t || HeroService)(i0.ɵɵinject(i1.MessageService), i0.ɵɵinject(i2.HttpClient));\n};\nHeroService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: HeroService,\n  factory: HeroService.ɵfac,\n  providedIn: 'root'\n});\nexport { HeroService };","map":{"version":3,"names":["of","catchError","tap","HeroService","constructor","messageService","http","heroes","heroess","heroee","id","name","username","email","address","street","suite","city","zipcode","geo","lat","lng","phone","website","company","catchPhrase","bs","heroesUrl","getHero","get","pipe","_","addMessage","handleError","getHeroes","mesage","getIdLastHero","length","deleteHero","filter","heroe","addHeroe","hero","push","updateHeroe","map","myhero","operation","result","error","message","i0","ɵɵinject","i1","MessageService","i2","HttpClient","factory","ɵfac","providedIn"],"sources":["C:\\CURSOS\\MIO\\Angular\\my-app\\src\\app\\services\\hero.service.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\nimport { Hero, Heroo } from '../moduls/hero.interface';\nimport { HEROES } from '../moduls/mock-heroes';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map, tap } from 'rxjs/operators';\nimport { MessageService } from './message.service';\nimport { HttpClient, HttpHeaders } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class HeroService {\n\n  heroes:Hero[]=[];\n  heroess:Heroo[]=[];  \n  heroee:Heroo={\n    id: 0,\n    name: '',\n    username: '',\n    email: '',\n    address: {\n      street: '',\n      suite: '',\n      city: '',\n      zipcode: '',\n      geo: {\n        lat: '',\n        lng: ''        \n      }       \n    },\n    phone: '',\n    website: '',\n    company: {\n      name: '',\n      catchPhrase: '',\n      bs: ''      \n    }\n  };\n\n  private heroesUrl = 'https://jsonplaceholder.typicode.com/users';\n  \n\n  constructor(\n      private messageService:MessageService,\n      private http: HttpClient) { \n      //this.heroes = HEROES; \n  }\n\n  getHero(id:number):Observable<Heroo> { \n    //return of(this.heroess.find(item=>item.id == id));\n    return this.http.get<Heroo>(this.heroesUrl+\"/\"+id).pipe(\n      tap(_ => this.messageService.addMessage(' get Heore ' +id ) ),      \n      catchError(this.handleError<Heroo>('getHeroes', heroee))\n    );\n\n  }\n\n  getHeroes(mesage:string):Observable<Heroo[]>{\n//    this.messageService.addMessage(mesage + \": fetched heroes\");\n    return this.http.get<Heroo[]>(this.heroesUrl).pipe(\n      tap(_ => this.messageService.addMessage(mesage + ' get http') ),      \n      catchError(this.handleError<Heroo[]>('getHeroes', []))\n    );\n    //return of(this.heroes);\n  }\n\n  getIdLastHero():Observable<number>{\n    return of( this.heroess[this.heroess.length-1].id + 1 );\n  }  \n\n  deleteHero(id:number):Observable<Heroo[]>{\n    this.messageService.addMessage(\"-- Delete Hero id:\" + id + \" Ok\");\n    return  of(this.heroess = this.heroess.filter(heroe => heroe.id != id));\n  }\n\n  addHeroe(hero:Heroo):Observable<any>{\n    this.messageService.addMessage(\"-- Add Hero id:\" + hero.id + \" Ok\");     \n    return  of( this.heroess.push(hero) );\n  }\n\n  updateHeroe(hero:Hero):Observable<void[]>{\n    return  of(this.heroes.map(\n      (myhero)=>{\n        if(myhero.id === hero.id){\n            this.messageService.addMessage(\"-- Update Hero id:\" + myhero.id + \" Ok\");\n            myhero.name = hero.name\n          };\n        }    \n      )\n    );    \n  }  \n\n  private handleError<T>(operation = 'operation', result?: T) {\n    return (error: any): Observable<T> => {\n  \n      // TODO: send the error to remote logging infrastructure\n      //console.error(error); // log to console instead\n  \n      // TODO: better job of transforming error for user consumption\n      //this.log(`${operation} failed: ${error.message}`);\n      this.messageService.addMessage(`-- ${operation} -- failed: \\n\\n ${error.message}`);\n  \n      // Let the app keep running by returning an empty result.\n      return of(result as T);\n    };\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}